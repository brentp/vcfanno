<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://github.com/brentp/vcfanno/performance_tips/">
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Performance - vcfanno</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">vcfanno</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li class="active">
                    <a href="./">Performance</a>
                </li>
            
            
            
                <li >
                    <a href="../CHANGES/">Changes</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../examples/clinvar_exac/">ClinvarExac</a>
                        </li>
                    
                        <li >
                            <a href="../examples/cadd/">CADD</a>
                        </li>
                    
                        <li >
                            <a href="../examples/exac_combine/exac_combine/">ExAC-Combine</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="..">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../CHANGES/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/brentp/vcfanno">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#performance-tips">Performance Tips</a></li>
        
            <li><a href="#processes">Processes</a></li>
        
            <li><a href="#garbage-collection">Garbage Collection</a></li>
        
            <li><a href="#max-gap-size">Max Gap Size</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="performance-tips">Performance Tips</h1>
<p>Following the <a href="https://golang.org">golang</a> philosophy, there are few knobs
to turn for tweaking performance.</p>
<h2 id="processes">Processes</h2>
<p>The simplest performance tweak is to use <code>-p PROCS</code> to specify the number
of processes to use when running <code>vcfanno</code>. It scales well to ~15 processes.</p>
<h2 id="garbage-collection">Garbage Collection</h2>
<p>On machines with even modest amounts of memory, it can be good to allow
<code>go</code> to use more memory for the benefit of spending less time in garbage
collection. Users can do this by preceding their <code>vcfanno</code> command with
<code>GOGC=1000</code>. Where higher values allow <code>go</code> to use more memory and the
default value is 100. For example:</p>
<pre><code>GOGC=2000 vcfanno -p 12 a.conf a.vcf
</code></pre>

<h2 id="max-gap-size">Max Gap Size</h2>
<p>The parallel chrom-sweep algorithm has a gap size parameter that determines
when a chunk of records from the the query file is sent to be annotated. If
a gap of a certain
size is encountered, a new chunk is sent off. Given a (number of) dense
annotation file(s), it might be good to reduce the gap size so that <code>vcfanno</code>
will need to parse fewer unneeded records. However, given sparse annotation
sets, it is best to have this value be large so that each annotation worker
gets enough work to keep it busy.</p>
<p>The default gap size is <code>20000</code> bases. Users can alter this using the
environment variable <code>IRELATE_MAX_GAP</code> e.g.:</p>
<pre><code>IRELATE_MAX_GAP=5000 vcfanno -p 12 a.conf a.vcf
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>